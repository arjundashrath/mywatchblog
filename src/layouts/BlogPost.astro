---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import FormattedDate from "../components/FormattedDate.astro";
import Header from "../components/Header.astro";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en-IN">
	<head>
		<BaseHead
			title={title}
			description={description}
			image={heroImage}
			pubDate={pubDate}
			updatedDate={updatedDate}
			type="BlogPosting"
		/>
	</head>

	<body>
		<Header />
		<main>
			<article>
				{
					heroImage && (
						<div class="hero-image">
							<Image
								width={1020}
								height={510}
								src={heroImage}
								alt={title}
							/>
						</div>
					)
				}
				<div class="prose">
					<div class="article-header">
						<div class="date">
							<FormattedDate date={pubDate} />
							{
								updatedDate && (
									<span class="updated">
										Â· Updated{" "}
										<FormattedDate date={updatedDate} />
									</span>
								)
							}
						</div>
						<h1>{title}</h1>
					</div>
					<slot />
				</div>
			</article>
		</main>
		<Footer />
		<style>
			main {
				width: calc(100% - 2em);
				max-width: 100%;
				margin: 0;
			}

			.hero-image {
				width: 100%;
				max-width: 960px;
				margin: 0 auto;
				padding: 1em 1em 0;
			}

			.hero-image img {
				display: block;
				width: 100%;
				border-radius: var(--radius);
				box-shadow: var(--shadow-md);
			}

			.prose {
				width: 720px;
				max-width: calc(100% - 2em);
				margin: auto;
				padding: 1.5em 1em 3em;
				color: var(--text);
			}

			.article-header {
				margin-bottom: 2em;
				padding-bottom: 1.5em;
				border-bottom: 1px solid var(--border);
			}

			.article-header h1 {
				margin: 0.4em 0 0;
				font-size: 2.5rem;
				line-height: 1.15;
			}

			.date {
				font-size: 0.85rem;
				color: var(--text-muted);
				text-transform: uppercase;
				letter-spacing: 0.05em;
			}

			.updated {
				font-style: italic;
				text-transform: none;
				letter-spacing: 0;
			}

			@media (max-width: 720px) {
				.article-header h1 {
					font-size: 1.85rem;
				}
			}
		</style>
	</body>
</html>
